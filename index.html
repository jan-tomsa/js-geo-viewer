<html>
<head>
<title>JS Geo viewer</title>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-2">
<style type="text/css">
@import "css/jquery.svg.css";

#svgbasics { width: 1000px; height: 700px; border: 0px; }
</style>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.svg.js"></script>
	<script type="text/javascript" src="js/svg_gv.js"></script>
	<script type="text/javascript" src="js/geoviewer.js"></script>
	<script type="text/javascript" src="js/presets.js" charset="UTF-8"></script>
	<script type="text/javascript" src="js/wms_layers.js" charset="UTF-8"></script>
</head>
<body>
	<table>
		<tr>
			<td valign="top">
	<form name="frm1">
		X2: <input type="text" id="x2" name="x2" value="-1152710">(top [^&gt;])<br/>
		Y1: <input type="text" id="y1" name="y1" value="-526404">(left [&lt;])<br/>
		Y2: <input type="text" id="y2" name="y2" value="-526216">(right [&gt;])<br/>
		X1: <input type="text" id="x1" name="x1" value="-1152840">(bottom [v&lt;])<br/>
		(0,0 je nìkde v Estonsku)
		<input type="button" value="Display" onClick="displayMap()">
		<input type="checkbox" id="autoDisplay" value="Auto" title="Display automatically" checked="checked">Auto<br/>
		<input type="button" value="+" onClick="zoomIn()"  title="Zoom In">
		<input type="button" value="-" onClick="zoomOut()" title="Zoom Out">
		|
		<input type="button" value="<" onClick="panWest()" title="West">
		<input type="button" value="^" onClick="panNorth()" title="North">
		<input type="button" value="v" onClick="panSouth()" title="South">
		<input type="button" value=">" onClick="panEast()" title="East">
		<hr>
		<div>WMS: <select id="selWms" name="selWms" size="1">
				<option value="http://wms.cuzk.cz/wms.asp?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap">Old WMS ÈÚZK</option>
				<option value="http://services.cuzk.cz/wms/local-ux-wms.asp?service=WMS&version=1.3.0&request=getMap&CRS=EPSG:102066">Units eXtended</option>
				<option value="http://geoportal.cuzk.cz/WMS_ZM50_PUB/wmservice.aspx?service=WMS&version=1.3.0&request=getMap&CRS=EPSG:5514">WMS_ZM50_PUB</option>
				<option value="http://geoportal.cuzk.cz/WMS_ZM10_PUB/wmservice.aspx?service=WMS&version=1.3.0&request=getMap&CRS=EPSG:5514">WMS_ZM10_PUB</option>
				<option value="http://geoportal.cuzk.cz/WMS_ORTOFOTO_PUB/wmservice.aspx?service=WMS&version=1.3.0&request=getMap&CRS=EPSG:5514">Ortofoto</option>
			</select>
		</div>
		<strong>Layers:</strong>
		<input id="layers" name="layers" size="20">
		<ul style="display:none;">
			<li>prehledka_kat_prac</li>
			<li><strong>dalsi_p_mapy</strong></li>
			<li><strong>hranice_parcel</strong></li>
			<li><strong>obrazy_parcel</strong></li>
			<li><strong>parcelni_cisla</strong></li>
			<li>prehledka_kat_uz</li>
			<li>prehledka_kraju-linie</li>
			<li>RST_KMD</li>
			<li>RST_KN</li>
		</ul>
	</form>
	<hr>
	<h3>Presets</h3>
	<select id="selPresets">
		<option>Please select...</option>
	</select>
	<hr>
			</td>
			<td valign="top">
			<img id="contents" src="http://docutils.sourceforge.net/docs/user/images/rsp-empty.png" width="1000" height="700" />
<p><button id="drawLines">Draw Lines</button>
   <button id="mbr">MBR</button>
   <button id="clear">Clear</button>
   <button id="export">Export</button>
   <span id="messages">...</span>
</p>
<div id="svgbasics" style="position:absolute;"></div>
<div id="svgexport"></div>
			</td>
		</tr>
		<tr>
			<td>
	<h3>SVG</h3>
	<p>Coordinates script:</p>
			</td>
			<td rowspan="2">
				<textarea id="myScript" rows="15" cols="145" style="font-family:Consolas">MDSYS.SDO_GEOMETRY(2002,NULL,NULL,MDSYS.SDO_ELEM_INFO_ARRAY(1,2,1),MDSYS.SDO_ORDINATE_ARRAY(995142370,667673990,995123440,667639560))</textarea>
			</td>
		</tr>
		<tr>
			<td>
	<p>syntax:</p>
	<p>[line] &lt;x&gt;,&lt;y&gt;</p>
	<p>rect &lt;x1&gt;,&lt;y2&gt;,&lt;x2&gt;,&lt;y2&gt;</p>
	<p>color &lt;color&gt;</p>
	<p>width &lt;width&gt;</p>
	<p>text &lt;text&gt; &lt;x&gt; &lt;y&gt;</p>
			</td>
		</tr>
	</table>
	<script>
function populatePresets() {
   var selPresets = $("#selPresets");
   presets.forEach( function(it, num) { 
	   var o = new Option(it.name, "preset_"+num); 
	   o.setAttribute("y1",it.y1);
	   o.setAttribute("x1",it.x1);
	   o.setAttribute("y2",it.y2);
	   o.setAttribute("x2",it.x2);
	   selPresets.append(o); 
   } )
}

function populateWMSs() {
   var selWms = $("#selWms");
   while (selWms.find("option").length>0) {
      selWms.find("option").remove(0);
   }
   wms.forEach( function(it, num) {
	   var o = new Option(it.name, "wms_"+num); 
	   o.setAttribute("url",it.url);
	   selWms.append(o); 
   } );
}

$(document).ready(function(){
   populatePresets();
   var sel = $("#selPresets")
   sel.change( function() {
	   var selectedOption = sel.find("option[value='" +this.value+ "']")[0].attributes;
	   preset( selectedOption.y1.value, selectedOption.x1.value, selectedOption.y2.value, selectedOption.x2.value );
   } );
   populateWMSs();
   var selWms = $("#selWms");
   selWms.change( function() {
	   var selectedOption = selWms.find("option[value='" +this.value+ "']")[0].attributes;
	   selWms[0].setAttribute("url",selectedOption.url.value);
	   $("#layers")[0].value = wms[this.selectedIndex].layers;
	   //$("#layers")[0].value = wms.filter( function(it) { return (it.name == this.value); } );
   } );
   var firstOption = selWms.find("option")[0].attributes;
   selWms[0].setAttribute("url",firstOption.url.value);
   $("#layers")[0].value = wms[0].layers;
});
	</script>
</body>
</html>
